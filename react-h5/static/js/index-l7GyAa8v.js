import{r as e,u as i,_ as s,g as l,B as t,h as r}from"./antd-mobile-5vaucL_W.js";import{j as o,R as n,u as m}from"./index-D_0RFBAL.js";import{W as c,s as d,a as u,A as a}from"./index-BMrDTFkL.js";const f=({subtitle:e})=>o.jsxDEV("span",{className:"ml-[10px] cell-subtitle",children:e},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/components/CellTitle/index.tsx",lineNumber:4,columnNumber:10},void 0),x=({left:e,children:i,title:s,subtitle:l})=>o.jsxDEV("div",{className:"flex-bc p-[16px]",children:[e||o.jsxDEV("div",{className:"text-[var(--text-color-4)]",children:[o.jsxDEV("span",{className:"cell-title",children:s},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/components/CellTitle/index.tsx",lineNumber:14,columnNumber:13},void 0),l&&o.jsxDEV(f,{subtitle:l},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/components/CellTitle/index.tsx",lineNumber:15,columnNumber:26},void 0)]},void 0,!0,{fileName:"D:/work-files/study-files/react-h5/src/components/CellTitle/index.tsx",lineNumber:13,columnNumber:11},void 0),i]},void 0,!0,{fileName:"D:/work-files/study-files/react-h5/src/components/CellTitle/index.tsx",lineNumber:9,columnNumber:5},void 0),N=({children:e,showHeader:i,header:s,title:l,subtitle:t})=>o.jsxDEV(o.Fragment,{children:[i&&(s||o.jsxDEV(x,{title:l,subtitle:t},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/components/Card/index.tsx",lineNumber:6,columnNumber:41},void 0)),e]},void 0,!0,{fileName:"D:/work-files/study-files/react-h5/src/components/Card/index.tsx",lineNumber:5,columnNumber:5},void 0),v=({children:i,setHeight:s,index:l})=>{const t=e.useRef();return e.useEffect((()=>{if(t.current){const e=+getComputedStyle(t.current,null).height.slice(0,-2);e>0&&s(l,e)}}),[l]),o.jsxDEV("div",{className:"item",ref:t,children:i},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/components/VirtualList/Item.tsx",lineNumber:12,columnNumber:10},void 0)},h=({children:i,component:s,height:l="100%",data:t=[],options:r={itemHeight:40,between:3,size:30}})=>{const[n,m]=e.useState(r),c=n.size,d=n.itemHeight,u=n.between,[a,f]=e.useState(!1),x=e.useRef([]),N=e.useRef(),h=e=>{var i;return(null==(i=x.current)?void 0:i[e])??d},b=()=>{const e=[];let i=0;for(let s=0;s<t.length;s++)i+=h(s),e.push(i);return e},[D,w]=e.useState(b()),[y,p]=e.useState(0),V=e.useMemo((()=>D[D.length-1]),[D]);e.useEffect((()=>{var e,i;(null==(e=N.current)?void 0:e.scrollHeight)>(null==(i=N.current)?void 0:i.clientHeight)?f(!0):f(!1)}),[]);const{start:E,end:k,listStyle:j}=e.useMemo((()=>{const e=D.findIndex((e=>e>y)),i=t.length-c-2*u,s=Math.max(Math.min(e-u,i),0),l=e+c+u;return{start:s,end:Math.min(l,t.length),listStyle:{transform:`translateY(${0===s?0:null==D?void 0:D[s-1]}px)`}}}),[y,D]),g=l=>{const t=({item:l})=>"function"==typeof i?i(l):e.isValidElement(i)?o.jsxDEV("children",{item:l},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/components/VirtualList/index.tsx",lineNumber:70,columnNumber:16},void 0):"function"==typeof s?s(l):e.isValidElement(s)?o.jsxDEV("component",{item:l},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/components/VirtualList/index.tsx",lineNumber:76,columnNumber:16},void 0):o.jsxDEV(o.Fragment,{children:l},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/components/VirtualList/index.tsx",lineNumber:78,columnNumber:14},void 0);return o.jsxDEV(t,{item:l},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/components/VirtualList/index.tsx",lineNumber:81,columnNumber:12},void 0)},H=e.useCallback(((e,i)=>{var s;(null==(s=x.current)?void 0:s[e])!==i&&(x.current[e]=i,w(b()))}),[]);let C=[];for(let e=E;e<k;e++){const i=t[e];C.push(o.jsxDEV(v,{setHeight:H,index:e,children:g(i)},(null==i?void 0:i.id)??e,!1,{fileName:"D:/work-files/study-files/react-h5/src/components/VirtualList/index.tsx",lineNumber:95,columnNumber:16},void 0))}return o.jsxDEV("div",{className:"list-container",ref:N,onScroll:e=>{if(!a)return;const i=e.target.scrollTop;p(i)},style:{height:l,overflow:"auto"},children:[o.jsxDEV("div",{style:{height:V}},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/components/VirtualList/index.tsx",lineNumber:101,columnNumber:7},void 0),o.jsxDEV("div",{className:"list-wrapper px-4",style:j,children:C},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/components/VirtualList/index.tsx",lineNumber:102,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/work-files/study-files/react-h5/src/components/VirtualList/index.tsx",lineNumber:100,columnNumber:5},void 0)},b=c((c=>{const[f,v]=n(d),b=m(),[D,w]=e.useState(0),[y,p]=e.useState(f.isDark),[V,E]=e.useState(0);e.useState([]);const{run:k}=i((()=>{E((e=>e+1))}),{wait:400,leading:!1,trailing:!0});e.useEffect((()=>(window.addEventListener("resize",k),u(f),()=>{window.removeEventListener("resize",k)})),[f]);const j=e.useMemo((()=>new Array(50).fill(0).map(((e,i)=>new Array(Math.floor(Math.random()*Math.floor(100-50*Math.random()))).fill(`${i} `).join("")))),[]);return o.jsxDEV(a,{...c,children:o.jsxDEV("div",{className:"flex h-full flex-col",children:[o.jsxDEV("div",{className:"px-5 py-3",children:"技术栈基于vite + react@18 + antd-mobile@5.37.1 + react-router-dom@6 + recoil + react-activation + tailwindcss"},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/views/Home/index.tsx",lineNumber:50,columnNumber:9},void 0),o.jsxDEV(s,{layout:"horizontal",children:o.jsxDEV(N,{showHeader:!0,title:"主题设置",children:[o.jsxDEV(s.Item,{label:"切换主题",childElementPosition:"right",children:o.jsxDEV(l,{size:"24px",checked:y,onChange:e=>{const i=e?"dark":"light";v({...f,theme:i,isDark:e}),p(e)}},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/views/Home/index.tsx",lineNumber:57,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/views/Home/index.tsx",lineNumber:56,columnNumber:13},void 0),o.jsxDEV(s.Item,{label:"计算",childElementPosition:"right",children:o.jsxDEV(t,{color:"primary",onClick:()=>w((e=>e+1)),children:["count: ",D]},void 0,!0,{fileName:"D:/work-files/study-files/react-h5/src/views/Home/index.tsx",lineNumber:64,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/views/Home/index.tsx",lineNumber:63,columnNumber:13},void 0),o.jsxDEV(s.Item,{children:o.jsxDEV("div",{className:"w-full flex-c",children:o.jsxDEV(r,{direction:"vertical",children:[o.jsxDEV(t,{color:"primary",onClick:()=>b("/home2"),children:"/home2 会缓存首页"},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/views/Home/index.tsx",lineNumber:76,columnNumber:19},void 0),o.jsxDEV(t,{color:"primary",onClick:()=>b("/about"),children:"/about 不会缓存首页"},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/views/Home/index.tsx",lineNumber:82,columnNumber:19},void 0)]},void 0,!0,{fileName:"D:/work-files/study-files/react-h5/src/views/Home/index.tsx",lineNumber:75,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/views/Home/index.tsx",lineNumber:74,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/views/Home/index.tsx",lineNumber:73,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/work-files/study-files/react-h5/src/views/Home/index.tsx",lineNumber:55,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/views/Home/index.tsx",lineNumber:54,columnNumber:9},void 0),o.jsxDEV(x,{title:"虚拟列表"},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/views/Home/index.tsx",lineNumber:93,columnNumber:9},void 0),o.jsxDEV("div",{className:"flex-1 min-h-[100px] overflow-hidden",children:o.jsxDEV(h,{data:j},V,!1,{fileName:"D:/work-files/study-files/react-h5/src/views/Home/index.tsx",lineNumber:95,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/views/Home/index.tsx",lineNumber:94,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/work-files/study-files/react-h5/src/views/Home/index.tsx",lineNumber:49,columnNumber:7},void 0)},void 0,!1,{fileName:"D:/work-files/study-files/react-h5/src/views/Home/index.tsx",lineNumber:48,columnNumber:5},void 0)}));export{b as default};
