import{r as e,_ as i,g as t,B as s,h as l}from"./antd-mobile-fllMprRv.js";import{j as r,R as o,u as n}from"./index-Bm9w-DvP.js";import{W as m,s as c,a as d,A as u}from"./index-BGraK3Zz.js";const a=({subtitle:e})=>r.jsxDEV("span",{className:"ml-[10px] cell-subtitle",children:e},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/CellTitle/index.tsx",lineNumber:4,columnNumber:10},void 0),v=({left:e,children:i,title:t,subtitle:s})=>r.jsxDEV("div",{className:"flex-bc p-[16px]",children:[e||r.jsxDEV("div",{className:"text-[var(--text-color-4)]",children:[r.jsxDEV("span",{className:"cell-title",children:t},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/CellTitle/index.tsx",lineNumber:14,columnNumber:13},void 0),s&&r.jsxDEV(a,{subtitle:s},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/CellTitle/index.tsx",lineNumber:15,columnNumber:26},void 0)]},void 0,!0,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/CellTitle/index.tsx",lineNumber:13,columnNumber:11},void 0),i]},void 0,!0,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/CellTitle/index.tsx",lineNumber:9,columnNumber:5},void 0),f=({children:e,showHeader:i,header:t,title:s,subtitle:l})=>r.jsxDEV(r.Fragment,{children:[i&&(t||r.jsxDEV(v,{title:s,subtitle:l},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/Card/index.tsx",lineNumber:6,columnNumber:41},void 0)),e]},void 0,!0,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/Card/index.tsx",lineNumber:5,columnNumber:5},void 0),x=({children:i,setHeight:t,index:s})=>{const l=e.useRef();return e.useEffect((()=>{if(l.current){const e=+getComputedStyle(l.current,null).height.slice(0,-2);e>0&&t(s,e)}}),[s]),r.jsxDEV("div",{className:"item",ref:l,children:i},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/VirtualList/Item.tsx",lineNumber:12,columnNumber:10},void 0)},N=({children:i,component:t,height:s="100%",data:l=[],options:o={itemHeight:40,between:3,size:30}})=>{const[n,m]=e.useState(o),c=n.size,d=n.itemHeight,u=n.between,[a,v]=e.useState(!1),f=e.useRef([]),N=e.useRef(),h=e=>{var i;return(null==(i=f.current)?void 0:i[e])??d},b=()=>{const e=[];let i=0;for(let t=0;t<l.length;t++)i+=h(t),e.push(i);return e},[D,w]=e.useState(b()),[y,p]=e.useState(0),V=e.useMemo((()=>D[D.length-1]),[D]);e.useEffect((()=>{var e,i;(null==(e=N.current)?void 0:e.scrollHeight)>(null==(i=N.current)?void 0:i.clientHeight)?v(!0):v(!1)}),[]);const{start:k,end:E,listStyle:j}=e.useMemo((()=>{const e=D.findIndex((e=>e>y)),i=l.length-c-2*u,t=Math.max(Math.min(e-u,i),0),s=e+c+u;return{start:t,end:Math.min(s,l.length),listStyle:{transform:`translateY(${0===t?0:null==D?void 0:D[t-1]}px)`}}}),[y,D]),H=s=>{const l=({item:s})=>"function"==typeof i?i(s):e.isValidElement(i)?r.jsxDEV("children",{item:s},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/VirtualList/index.tsx",lineNumber:70,columnNumber:16},void 0):"function"==typeof t?t(s):e.isValidElement(t)?r.jsxDEV("component",{item:s},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/VirtualList/index.tsx",lineNumber:76,columnNumber:16},void 0):r.jsxDEV(r.Fragment,{children:s},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/VirtualList/index.tsx",lineNumber:78,columnNumber:14},void 0);return r.jsxDEV(l,{item:s},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/VirtualList/index.tsx",lineNumber:81,columnNumber:12},void 0)},g=e.useCallback(((e,i)=>{var t;(null==(t=f.current)?void 0:t[e])||(f.current[e]=i,w(b()))}),[]);let C=[];for(let e=k;e<E;e++){const i=l[e];C.push(r.jsxDEV(x,{setHeight:g,index:e,children:H(i)},(null==i?void 0:i.id)??e,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/VirtualList/index.tsx",lineNumber:95,columnNumber:16},void 0))}return r.jsxDEV("div",{className:"list-container",ref:N,onScroll:e=>{if(!a)return;const i=e.target.scrollTop;p(i)},style:{height:s,overflow:"auto"},children:[r.jsxDEV("div",{style:{height:V}},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/VirtualList/index.tsx",lineNumber:101,columnNumber:7},void 0),r.jsxDEV("div",{className:"list-wrapper px-4",style:j,children:C},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/VirtualList/index.tsx",lineNumber:102,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/VirtualList/index.tsx",lineNumber:100,columnNumber:5},void 0)},h=m((m=>{const[a,x]=o(c),h=n(),[b,D]=e.useState(0),[w,y]=e.useState(a.isDark);e.useState([]);e.useEffect((()=>{d(a)}),[a]);const p=e.useMemo((()=>new Array(50).fill(0).map(((e,i)=>new Array(Math.floor(Math.random()*Math.floor(100-50*Math.random()))).fill(`${i} `).join("")))),[]);return r.jsxDEV(u,{...m,children:r.jsxDEV("div",{className:"flex h-full flex-col",children:[r.jsxDEV("div",{className:"px-5 py-3",children:"技术栈基于vite + react@18 + antd-mobile@5.37.1 + react-router-dom@6 + recoil + react-activation + tailwindcss"},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/views/Home/index.tsx",lineNumber:41,columnNumber:9},void 0),r.jsxDEV(i,{layout:"horizontal",children:r.jsxDEV(f,{showHeader:!0,title:"主题设置",children:[r.jsxDEV(i.Item,{label:"切换主题",childElementPosition:"right",children:r.jsxDEV(t,{size:"24px",checked:w,onChange:e=>{const i=e?"dark":"light";x({...a,theme:i,isDark:e}),y(e)}},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/views/Home/index.tsx",lineNumber:48,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/views/Home/index.tsx",lineNumber:47,columnNumber:13},void 0),r.jsxDEV(i.Item,{label:"计算",childElementPosition:"right",children:r.jsxDEV(s,{color:"primary",onClick:()=>D((e=>e+1)),children:["count: ",b]},void 0,!0,{fileName:"D:/work-files/study-files/vite-react-h5/src/views/Home/index.tsx",lineNumber:55,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/views/Home/index.tsx",lineNumber:54,columnNumber:13},void 0),r.jsxDEV(i.Item,{children:r.jsxDEV("div",{className:"w-full flex-c",children:r.jsxDEV(l,{direction:"vertical",children:[r.jsxDEV(s,{color:"primary",onClick:()=>h("/home2"),children:"/home2 会缓存首页"},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/views/Home/index.tsx",lineNumber:67,columnNumber:19},void 0),r.jsxDEV(s,{color:"primary",onClick:()=>h("/about"),children:"/about 不会缓存首页"},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/views/Home/index.tsx",lineNumber:73,columnNumber:19},void 0)]},void 0,!0,{fileName:"D:/work-files/study-files/vite-react-h5/src/views/Home/index.tsx",lineNumber:66,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/views/Home/index.tsx",lineNumber:65,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/views/Home/index.tsx",lineNumber:64,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/work-files/study-files/vite-react-h5/src/views/Home/index.tsx",lineNumber:46,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/views/Home/index.tsx",lineNumber:45,columnNumber:9},void 0),r.jsxDEV(v,{title:"虚拟列表"},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/views/Home/index.tsx",lineNumber:84,columnNumber:9},void 0),r.jsxDEV("div",{className:"flex-1 min-h-[100px] overflow-hidden",children:r.jsxDEV(N,{data:p},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/views/Home/index.tsx",lineNumber:86,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/views/Home/index.tsx",lineNumber:85,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/work-files/study-files/vite-react-h5/src/views/Home/index.tsx",lineNumber:40,columnNumber:7},void 0)},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/views/Home/index.tsx",lineNumber:39,columnNumber:5},void 0)}));export{h as default};
