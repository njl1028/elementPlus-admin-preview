import{j as e,r as i,a as n,b as o}from"./index-Ouww0qWF.js";import{u as s}from"./index-DJYtZjcm.js";import{r as l}from"./antd-mobile-6ne5lnpE.js";const t=({children:t,...r})=>{const{keepAlive:a}=r,{user:m}=s(),{drop:c}=i.useAliveController(),d=n(),u=d.pathname,[v]=l.useState(u),{router:p,isHash:f}=l.useContext(o),{basename:h}=p;return l.useEffect((()=>()=>{if("/login"!=d.pathname&&(null==m?void 0:m.token)&&(null==a?void 0:a.length)){let e=window.location.hash.slice(1);if(!f){const i=window.location.pathname.lastIndexOf(h);e=window.location.pathname.slice(i).replace(new RegExp(`^${h}/`),"/")}a.includes(e)||e===u||c(u)}}),[d]),(null==a?void 0:a.length)?e.jsxDEV(i.KeepAlive,{name:u,cacheKey:v,children:t},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/KeepAliveView/index.tsx",lineNumber:32,columnNumber:7},void 0):e.jsxDEV(e.Fragment,{children:t},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/KeepAliveView/index.tsx",lineNumber:36,columnNumber:7},void 0)},r=i=>n=>e.jsxDEV(t,{...n,children:e.jsxDEV(i,{...n},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/KeepAliveView/index.tsx",lineNumber:44,columnNumber:7},void 0)},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/KeepAliveView/index.tsx",lineNumber:43,columnNumber:5},void 0);export{r as W};
