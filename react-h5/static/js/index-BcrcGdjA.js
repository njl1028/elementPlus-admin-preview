import{r as e,a as i,b as n,j as o}from"./index-Cdd9_YFV.js";import{u as s}from"./index-B_SgmXIr.js";import{r as l}from"./antd-mobile-6ne5lnpE.js";const t=({children:t,...a})=>{const{keepAlive:r}=a,{user:c}=s(),{drop:m}=e.useAliveController(),d=i(),u=d.pathname,[p]=l.useState(u),{router:h,isHash:f}=l.useContext(n),{basename:v}=h;return l.useEffect((()=>()=>{if("/login"!=d.pathname&&(null==c?void 0:c.token)&&(null==r?void 0:r.length)){let e=window.location.hash.slice(1);if(!f){const i=window.location.pathname.lastIndexOf(v);e=window.location.pathname.slice(i).replace(new RegExp(`^${v}/`),"/")}r.includes(e)||e===u||m(u)}}),[d]),(null==r?void 0:r.length)?o.jsxDEV(e.KeepAlive,{name:u,cacheKey:p,children:t},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/KeepAliveView/index.tsx",lineNumber:32,columnNumber:7},void 0):o.jsxDEV(o.Fragment,{children:t},void 0,!1,{fileName:"D:/work-files/study-files/vite-react-h5/src/components/KeepAliveView/index.tsx",lineNumber:36,columnNumber:7},void 0)};export{t as K};
