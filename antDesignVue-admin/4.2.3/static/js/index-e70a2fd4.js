import{d as a,k as e,f as t,g as l,o,c as d,w as s,m as n,a as i,u as r,E as u,t as c,V as p,l as v,F as g,x as m,W as f,L as y,N as w,n as h,_ as k}from"./ant-design-vue-b00fac33.js";import{M as _}from"./MainPanel-06aca885.js";import{_ as x}from"./MyDrawer-1e3ffc0e.js";import{g as z,p as b,_ as S}from"./index-4aedd45a.js";const I=a=>b("",a);const C={class:"pb-15"},j={class:"table-wrapper"},U={key:0,class:"pagination-wrapper"},D=a({name:"ExamplePage"});var F=S(Object.assign(D,{setup(a){const b=[{title:"ID",key:"ID",dataIndex:"ID"},{title:"数据1",key:"data1",dataIndex:"data1"},{title:"数据2",key:"data2",dataIndex:"data2"},{title:"操作",key:"op",dataIndex:"op"}];b.forEach((a=>a.align="center"));const S=e([]),D=e({total:0,page:1,pageSize:10}),F=a=>{D.value={...D.value,page:a},M()},O=(a,e)=>{D.value={...D.value,page:1,pageSize:e},M()},E=e(!1),M=async()=>{E.value=!0;const{page:a,pageSize:e}=D.value,t={page:a,pageSize:e},l=await(a=>z("",a))(t).catch((a=>{E.value=!1})),o=null==l?void 0:l.data;if(o){const{list:a,...e}=o,{page:t,pageSize:l,total:d}=e;S.value=a,D.value={...D.value,page:t,pageSize:l,total:d}}E.value=!1};M();const q=t({data1:"",data2:""}),A=t({title:l((()=>A[A.method])),method:"",id:"",add:"新增",edit:"修改"}),N=e(),P=e(!1),$=e(!1),B=(a,e)=>{(a=>{if(!a)return;const e=a=>Object.prototype.toString.call(a).slice(8,-1);for(const t in a){const l=a[t];Array.isArray(l)?a[t]=[]:"Object"===e(l)?a[t]={}:"Boolean"===e(l)?a[t]=!1:"Number"===e(l)?a[t]=0:a[t]=""}})(q),A.method=a,P.value=!0,h((()=>{var t;null==(t=N.value)||t.resetFields(),"edit"===a&&(((a={},e={})=>{for(const t in a)a[t]=e[t]})(q,e),A.id=e.id)}))},L=e(!1),R=e({}),V=async()=>{if(await N.value.validateFields()){$.value=!0;try{"add"===A.method?await(async()=>{const a=await I(q);(null==a?void 0:a.data)&&k.success("新增数据成功")})():"edit"===A.method&&await(async()=>{const a=await I(A.id);(null==a?void 0:a.data)&&k.success("修改数据成功")})(),$.value=!1,P.value=!1}catch(a){$.value=!1}}};return(a,e)=>(o(),d(_,{loading:E.value},{default:s((()=>[n("div",C,[i(r(u),{type:"primary",onClick:e[0]||(e[0]=a=>B("add"))},{default:s((()=>[c(" 添加数据 ")])),_:1})]),n("div",j,[i(r(p),{columns:b,"data-source":S.value,"row-key":a=>a.id,pagination:!1,bordered:!0,scroll:{x:!0},"row-class-name":"text-center"},{bodyCell:s((({column:a,record:e})=>["op"===a.dataIndex?(o(),v(g,{key:0},[i(r(u),{type:"link",onClick:()=>{return a=e,L.value=!0,void(R.value=a);var a}},{default:s((()=>[c("查看详情")])),_:2},1032,["onClick"]),i(r(u),{type:"link",onClick:()=>B("edit",e)},{default:s((()=>[c("编辑")])),_:2},1032,["onClick"])],64)):m("",!0)])),_:1},8,["data-source","row-key"]),D.value.total?(o(),v("div",U,[i(r(f),{current:D.value.page,"onUpdate:current":e[1]||(e[1]=a=>D.value.page=a),"page-size":D.value.pageSize,"onUpdate:pageSize":e[2]||(e[2]=a=>D.value.pageSize=a),total:D.value.total,"show-size-changer":"","show-total":a=>`总共 ${a} 条数据`,onChange:F,onShowSizeChange:O},null,8,["current","page-size","total","show-total"])])):m("",!0)]),i(x,{open:P.value,"onUpdate:open":e[5]||(e[5]=a=>P.value=a),"get-container":a.$el,width:"500px",title:A.title,onOnConfirm:V},{default:s((()=>[i(r(y),{model:q,ref_key:"exampleFormRef",ref:N,"label-col":{span:4},"wrapper-col":{span:12},autocomplete:"off"},{default:s((()=>[i(r(y).Item,{label:"数据1",name:"data1",rules:[{required:!0,message:"请输入数据1"}]},{default:s((()=>[i(r(w),{placeholder:"请输入数据1",value:q.data1,"onUpdate:value":e[3]||(e[3]=a=>q.data1=a)},null,8,["value"])])),_:1}),i(r(y).Item,{label:"数据2",name:"data2",rules:[{required:!0,message:"请输入数据2"}]},{default:s((()=>[i(r(w),{placeholder:"请输入数据2",value:q.data2,"onUpdate:value":e[4]||(e[4]=a=>q.data2=a)},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["open","get-container","title"])])),_:1},8,["loading"]))}}),[["__scopeId","data-v-f07ad17e"]]);export{F as default};
