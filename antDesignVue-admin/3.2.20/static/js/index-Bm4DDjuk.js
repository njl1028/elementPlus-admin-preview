import{q as a,h as e,i as t,o as l,a as o,w as s,d as i,x as d,b as n,z as u,u as r,L as c,v as p,F as v,B as g,_ as m,W as f,S as y,U as h,n as w,Q as b}from"./ant-design-vue-DVkIvOML.js";import{M as k}from"./MainPanel-CwQrABLe.js";import{_}from"./MyDrawer-B4pScDOS.js";import{g as z,p as x,_ as S}from"./index-BdlV1heG.js";const I=a=>x("",a),C={class:"pb-15"},j={class:"table-wrapper"},U={key:0,class:"pagination-wrapper"},D=i({name:"ExamplePage"}),F=S(Object.assign(D,{setup(i){const x=[{title:"ID",key:"ID",dataIndex:"ID"},{title:"数据1",key:"data1",dataIndex:"data1"},{title:"数据2",key:"data2",dataIndex:"data2"},{title:"操作",key:"op",dataIndex:"op"}];x.forEach((a=>a.align="center"));const S=a([]),D=a({total:0,page:1,pageSize:10}),F=a=>{D.value={...D.value,page:a},M()},O=(a,e)=>{D.value={...D.value,page:1,pageSize:e},M()},q=a(!1),M=async()=>{q.value=!0;const{page:a,pageSize:e}=D.value,t={page:a,pageSize:e},l=await(a=>z("",a))(t).catch((a=>{q.value=!1})),o=null==l?void 0:l.data;if(o){const{list:a,...e}=o,{page:t,pageSize:l,total:s}=e;S.value=a,D.value={...D.value,page:t,pageSize:l,total:s}}q.value=!1};M();const A=e({data1:"",data2:""}),B=e({title:t((()=>B[B.method])),method:"",id:"",add:"新增",edit:"修改"}),E=a(),P=a(!1),$=a(!1),L=(a,e)=>{(a=>{if(!a)return;const e=a=>Object.prototype.toString.call(a).slice(8,-1);for(const t in a){const l=a[t];Array.isArray(l)?a[t]=[]:"Object"===e(l)?a[t]={}:"Boolean"===e(l)?a[t]=!1:"Number"===e(l)?a[t]=0:a[t]=""}})(A),B.method=a,P.value=!0,w((()=>{var t;null==(t=E.value)||t.resetFields(),"edit"===a&&(((a={},e={})=>{for(const t in a)a[t]=e[t]})(A,e),B.id=e.id)}))},N=a(!1),Q=a({}),R=async()=>{if(await E.value.validateFields()){$.value=!0;try{"add"===B.method?await(async()=>{const a=await I(A);(null==a?void 0:a.data)&&b.success("新增数据成功")})():"edit"===B.method&&await(async()=>{const a=await I(B.id);(null==a?void 0:a.data)&&b.success("修改数据成功")})(),$.value=!1,P.value=!1}catch(a){$.value=!1}}};return(a,e)=>(l(),o(k,{loading:q.value},{default:s((()=>[d("div",C,[n(r(c),{type:"primary",onClick:e[0]||(e[0]=a=>L("add"))},{default:s((()=>[u(" 添加数据 ")])),_:1})]),d("div",j,[n(r(m),{columns:x,"data-source":S.value,"row-key":a=>a.id,pagination:!1,bordered:!0,scroll:{x:!0},"row-class-name":"text-center"},{bodyCell:s((({column:a,record:e})=>["op"===a.dataIndex?(l(),p(v,{key:0},[n(r(c),{type:"link",onClick:()=>{return a=e,N.value=!0,void(Q.value=a);var a}},{default:s((()=>[u("查看详情")])),_:2},1032,["onClick"]),n(r(c),{type:"link",onClick:()=>L("edit",e)},{default:s((()=>[u("编辑")])),_:2},1032,["onClick"])],64)):g("",!0)])),_:1},8,["data-source","row-key"]),D.value.total?(l(),p("div",U,[n(r(f),{current:D.value.page,"onUpdate:current":e[1]||(e[1]=a=>D.value.page=a),"page-size":D.value.pageSize,"onUpdate:pageSize":e[2]||(e[2]=a=>D.value.pageSize=a),total:D.value.total,"show-size-changer":"","show-total":a=>`总共 ${a} 条数据`,onChange:F,onShowSizeChange:O},null,8,["current","page-size","total","show-total"])])):g("",!0)]),n(_,{visible:P.value,"onUpdate:visible":e[5]||(e[5]=a=>P.value=a),"get-container":a.$el,width:"500px",title:B.title,onOnConfirm:R},{default:s((()=>[n(r(y),{model:A,ref_key:"exampleFormRef",ref:E,"label-col":{span:4},"wrapper-col":{span:12},autocomplete:"off"},{default:s((()=>[n(r(y).Item,{label:"数据1",name:"data1",rules:[{required:!0,message:"请输入数据1"}]},{default:s((()=>[n(r(h),{placeholder:"请输入数据1",value:A.data1,"onUpdate:value":e[3]||(e[3]=a=>A.data1=a)},null,8,["value"])])),_:1}),n(r(y).Item,{label:"数据2",name:"data2",rules:[{required:!0,message:"请输入数据2"}]},{default:s((()=>[n(r(h),{placeholder:"请输入数据2",value:A.data2,"onUpdate:value":e[4]||(e[4]=a=>A.data2=a)},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","get-container","title"])])),_:1},8,["loading"]))}}),[["__scopeId","data-v-f2388228"]]);export{F as default};
