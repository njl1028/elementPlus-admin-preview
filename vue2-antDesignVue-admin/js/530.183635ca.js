"use strict";(self["webpackChunkvue2_ant_admin"]=self["webpackChunkvue2_ant_admin"]||[]).push([[530],{74647:function(a,e,t){t.r(e),t.d(e,{default:function(){return f}});var i=function(){var a=this,e=a._self._c;return e("main-panel",{ref:"exampleContainer",attrs:{loading:a.isPageLoading}},[e("div",{staticClass:"pb-15"},[e("a-button",{attrs:{type:"primary"},on:{click:function(e){return a.openDialog("add")}}},[a._v(" 添加数据 ")])],1),e("div",{staticClass:"table-wrapper"},[e("a-table",{attrs:{size:"small",columns:a.columns,"data-source":a.tableData.list,"row-key":a=>a.key,pagination:!1,bordered:!0,scroll:{x:!0},"row-class-name":()=>"text-center"},scopedSlots:a._u([{key:"op",fn:function(t,i){return[e("a-button",{attrs:{type:"link"},on:{click:function(e){return a.handleDialogShow(i)}}},[a._v("查看详情")]),e("a-button",{attrs:{type:"link"},on:{click:function(e){return a.openDialog("update",i)}}},[a._v("编辑")])]}}])}),a.tableData.total?e("div",{staticClass:"pagination-wrapper"},[e("a-pagination",{attrs:{"page-size":a.tableData.pageSize,total:a.tableData.total,"show-size-changer":"","show-total":a=>`总共 ${a} 条数据`},on:{"update:pageSize":function(e){return a.$set(a.tableData,"pageSize",e)},"update:page-size":function(e){return a.$set(a.tableData,"pageSize",e)},change:a.handlePageChange,showSizeChange:a.handlePageSizeChange},model:{value:a.tableData.page,callback:function(e){a.$set(a.tableData,"page",e)},expression:"tableData.page"}})],1):a._e()],1),e("my-modal",{attrs:{visible:a.isDialogShow,"get-container":()=>a.$refs.exampleContainer.$el,width:"500px",title:a.operateObj.title},on:{"update:visible":function(e){a.isDialogShow=e},onConfirm:a.onConfirm}},[e("a-form-model",{ref:"exampleFormRef",attrs:{model:a.exampleInfo,"label-col":{span:4},"wrapper-col":{span:12},autocomplete:"off"}},[e("a-form-model-item",{attrs:{label:"数据1",prop:"data1",rules:[{required:!0,message:"请输入数据1"}]}},[e("a-input",{attrs:{placeholder:"请输入数据1"},model:{value:a.exampleInfo.data1,callback:function(e){a.$set(a.exampleInfo,"data1",e)},expression:"exampleInfo.data1"}})],1),e("a-form-model-item",{attrs:{label:"数据2",prop:"data2",rules:[{required:!0,message:"请输入数据2"}]}},[e("a-input",{attrs:{placeholder:"请输入数据2"},model:{value:a.exampleInfo.data2,callback:function(e){a.$set(a.exampleInfo,"data2",e)},expression:"exampleInfo.data2"}})],1)],1)],1)],1)},o=[],n=t(58788),s=t(5809),l=t(41420),r=t(28191),d=(t(48021),t(45896)),p=t(13237);const c=["list"];var h={name:"ExamplePage",components:{MainPanel:l.A,MyModal:r.A},data(){return{isPageLoading:[],columns:[{title:"ID",key:"ID",dataIndex:"ID"},{title:"数据1",key:"data1",dataIndex:"data1"},{title:"数据2",key:"data2",dataIndex:"data2"},{title:"操作",key:"op",dataIndex:"op",scopedSlots:{customRender:"action"}}],tableData:{list:[],total:0,page:1,pageSize:10},isDialogShow:!1,isBtnLoading:!1,rowDetail:{},operateObj:{title:"",method:"",row:{},add:"新增",update:"修改"},exampleInfo:{data1:"",data2:""}}},watch:{"operateObj.method"(a){this.operateObj.title=this.operateObj[this.operateObj.method]}},created(){this.setColumnCenter(),this.getExampleTableList()},methods:{setColumnCenter(){this.columns.forEach((a=>a.align="center"))},handlePageChange(a){this.tableData.paeg=a,this.getExampleTableList()},handlePageSizeChange(a,e){this.tableData.paeg=1,this.tableData.pageSize=e,this.getExampleTableList()},async getExampleTableList(){this.isPageLoading=!0;const{page:a,pageSize:e}=this.tableData,t={page:a,pageSize:e},i=await(0,d.l$)(t).catch((()=>(this.isPageLoading=!1,Promise.reject()))),o=null===i||void 0===i?void 0:i.data;if(o){const{list:a}=o,e=(0,s.A)(o,c),{page:t,pageSize:i,total:l}=e;this.tableData=(0,n.A)((0,n.A)({},this.tableData),{},{list:a,page:t,pageSize:i,total:l})}this.isPageLoading=!1},openDialog(a,e){(0,p.kT)(this.exampleInfo),this.operateObj.method=a,this.isDialogShow=!0,this.$nextTick((()=>{var t;null===(t=this.$refs.exampleFormRef)||void 0===t||t.resetFields(),"update"===a&&((0,p.oB)(this.exampleInfo,e),this.operateObj.row=e)}))},handleDialogShow(a){this.isDetailShow=!0,this.rowDetail=a},async onConfirm(){try{const e=await this.$refs.exampleFormRef.validate();if(!e)return;this.isBtnLoading=!0;try{"add"===this.operateObj.method?await this.addExampleInfo():"update"===this.operateObj.method&&await this.editExampleInfo(),this.isBtnLoading=!1,this.isDialogShow=!1}catch(a){this.isBtnLoading=!1}}catch(a){}},async addExampleInfo(){const a=await(0,d.wK)(this.exampleInfo);null!==a&&void 0!==a&&a.data&&this.$message.success("新增数据成功")},async editExampleInfo(){const a=await(0,d.wK)(this.operateObj.row.id,this.exampleInfo);null!==a&&void 0!==a&&a.data&&this.$message.success("修改数据成功")},async deleteExampleInfo(a={}){this.$confirm({keyboard:!1,title:"警告",content:`确认要删除ID为${a.id}的数据吗`,onOk:async()=>{const e=await(0,d.um)(a.id);null!==e&&void 0!==e&&e.data&&this.$message.success("删除数据成功")}})}}},m=h,g=t(81656),u=(0,g.A)(m,i,o,!1,null,"f7c7f840",null),f=u.exports}}]);