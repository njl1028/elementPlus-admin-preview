"use strict";(self["webpackChunkvue2_ant_admin"]=self["webpackChunkvue2_ant_admin"]||[]).push([[530],{74647:function(e,a,t){t.r(a),t.d(a,{default:function(){return b}});var n=function(){var e=this,a=e._self._c;return a("main-panel",{ref:"exampleContainer",attrs:{loading:e.isPageLoading}},[a("div",{staticClass:"pb-15"},[a("a-button",{attrs:{type:"primary"},on:{click:function(a){return e.openDialog("add")}}},[e._v(" 添加数据 ")])],1),a("div",{staticClass:"table-wrapper"},[a("a-table",{attrs:{size:"small",columns:e.columns,"data-source":e.tableData.list,"row-key":function(e){return e.key},pagination:!1,bordered:!0,scroll:{x:!0},"row-class-name":function(){return"text-center"}},scopedSlots:e._u([{key:"op",fn:function(t,n){return[a("a-button",{attrs:{type:"link"},on:{click:function(a){return e.handleDialogShow(n)}}},[e._v("查看详情")]),a("a-button",{attrs:{type:"link"},on:{click:function(a){return e.openDialog("update",n)}}},[e._v("编辑")])]}}])}),e.tableData.total?a("div",{staticClass:"pagination-wrapper"},[a("a-pagination",{attrs:{"page-size":e.tableData.pageSize,total:e.tableData.total,"show-size-changer":"","show-total":function(e){return"总共 ".concat(e," 条数据")}},on:{"update:pageSize":function(a){return e.$set(e.tableData,"pageSize",a)},"update:page-size":function(a){return e.$set(e.tableData,"pageSize",a)},change:e.handlePageChange,showSizeChange:e.handlePageSizeChange},model:{value:e.tableData.page,callback:function(a){e.$set(e.tableData,"page",a)},expression:"tableData.page"}})],1):e._e()],1),a("my-modal",{attrs:{visible:e.isDialogShow,"get-container":function(){return e.$refs.exampleContainer.$el},width:"500px",title:e.operateObj.title},on:{"update:visible":function(a){e.isDialogShow=a},onConfirm:e.onConfirm}},[a("a-form-model",{ref:"exampleFormRef",attrs:{model:e.exampleInfo,"label-col":{span:4},"wrapper-col":{span:12},autocomplete:"off"}},[a("a-form-model-item",{attrs:{label:"数据1",prop:"data1",rules:[{required:!0,message:"请输入数据1"}]}},[a("a-input",{attrs:{placeholder:"请输入数据1"},model:{value:e.exampleInfo.data1,callback:function(a){e.$set(e.exampleInfo,"data1",a)},expression:"exampleInfo.data1"}})],1),a("a-form-model-item",{attrs:{label:"数据2",prop:"data2",rules:[{required:!0,message:"请输入数据2"}]}},[a("a-input",{attrs:{placeholder:"请输入数据2"},model:{value:e.exampleInfo.data2,callback:function(a){e.$set(e.exampleInfo,"data2",a)},expression:"exampleInfo.data2"}})],1)],1)],1)],1)},i=[],o=t(14048),r=t(41034),s=t(5809),l=t(30388),c=(t(51629),t(26099),t(23500),t(41420)),u=t(28191),p=(t(48021),t(45896)),d=t(13237),f=["list"],m={name:"ExamplePage",components:{MainPanel:c.A,MyModal:u.A},data:function(){return{isPageLoading:[],columns:[{title:"ID",key:"ID",dataIndex:"ID"},{title:"数据1",key:"data1",dataIndex:"data1"},{title:"数据2",key:"data2",dataIndex:"data2"},{title:"操作",key:"op",dataIndex:"op",scopedSlots:{customRender:"action"}}],tableData:{list:[],total:0,page:1,pageSize:10},isDialogShow:!1,isBtnLoading:!1,rowDetail:{},operateObj:{title:"",method:"",row:{},add:"新增",update:"修改"},exampleInfo:{data1:"",data2:""}}},watch:{"operateObj.method":function(e){this.operateObj.title=this.operateObj[this.operateObj.method]}},created:function(){this.setColumnCenter(),this.getExampleTableList()},methods:{setColumnCenter:function(){this.columns.forEach((function(e){return e.align="center"}))},handlePageChange:function(e){this.tableData.paeg=e,this.getExampleTableList()},handlePageSizeChange:function(e,a){this.tableData.paeg=1,this.tableData.pageSize=a,this.getExampleTableList()},getExampleTableList:function(){var e=this;return(0,l.A)((0,o.A)().mark((function a(){var t,n,i,l,c,u,d,m,h,g,x;return(0,o.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.isPageLoading=!0,t=e.tableData,n=t.page,i=t.pageSize,l={page:n,pageSize:i},a.next=5,(0,p.l$)(l)["catch"]((function(){return e.isPageLoading=!1,Promise.reject()}));case 5:c=a.sent,u=null===c||void 0===c?void 0:c.data,u&&(d=u.list,m=(0,s.A)(u,f),h=m.page,g=m.pageSize,x=m.total,e.tableData=(0,r.A)((0,r.A)({},e.tableData),{},{list:d,page:h,pageSize:g,total:x})),e.isPageLoading=!1;case 9:case"end":return a.stop()}}),a)})))()},openDialog:function(e,a){var t=this;(0,d.kT)(this.exampleInfo),this.operateObj.method=e,this.isDialogShow=!0,this.$nextTick((function(){var n;null===(n=t.$refs.exampleFormRef)||void 0===n||n.resetFields(),"update"===e&&((0,d.oB)(t.exampleInfo,a),t.operateObj.row=a)}))},handleDialogShow:function(e){this.isDetailShow=!0,this.rowDetail=e},onConfirm:function(){var e=this;return(0,l.A)((0,o.A)().mark((function a(){var t;return(0,o.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.$refs.exampleFormRef.validate();case 3:if(t=a.sent,t){a.next=6;break}return a.abrupt("return");case 6:if(e.isBtnLoading=!0,a.prev=7,"add"!==e.operateObj.method){a.next=13;break}return a.next=11,e.addExampleInfo();case 11:a.next=16;break;case 13:if("update"!==e.operateObj.method){a.next=16;break}return a.next=16,e.editExampleInfo();case 16:e.isBtnLoading=!1,e.isDialogShow=!1,a.next=23;break;case 20:a.prev=20,a.t0=a["catch"](7),e.isBtnLoading=!1;case 23:a.next=27;break;case 25:a.prev=25,a.t1=a["catch"](0);case 27:case"end":return a.stop()}}),a,null,[[0,25],[7,20]])})))()},addExampleInfo:function(){var e=this;return(0,l.A)((0,o.A)().mark((function a(){var t;return(0,o.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,(0,p.wK)(e.exampleInfo);case 2:t=a.sent,null!==t&&void 0!==t&&t.data&&e.$message.success("新增数据成功");case 4:case"end":return a.stop()}}),a)})))()},editExampleInfo:function(){var e=this;return(0,l.A)((0,o.A)().mark((function a(){var t;return(0,o.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,(0,p.wK)(e.operateObj.row.id,e.exampleInfo);case 2:t=a.sent,null!==t&&void 0!==t&&t.data&&e.$message.success("修改数据成功");case 4:case"end":return a.stop()}}),a)})))()},deleteExampleInfo:function(){var e=arguments,a=this;return(0,l.A)((0,o.A)().mark((function t(){var n;return(0,o.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.length>0&&void 0!==e[0]?e[0]:{},a.$confirm({keyboard:!1,title:"警告",content:"确认要删除ID为".concat(n.id,"的数据吗"),onOk:function(){var e=(0,l.A)((0,o.A)().mark((function e(){var t;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,p.um)(n.id);case 2:t=e.sent,null!==t&&void 0!==t&&t.data&&a.$message.success("删除数据成功");case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()});case 2:case"end":return t.stop()}}),t)})))()}}},h=m,g=t(81656),x=(0,g.A)(h,n,i,!1,null,"f7c7f840",null),b=x.exports}}]);