import{k as a,f as e,g as t,o as l,c as o,w as s,d as i,q as d,a as n,v as u,u as r,D as c,m as p,F as v,y as g,_ as m,P as f,N as y,O as w,n as h,J as k}from"./ant-design-vue-Dq45QoeV.js";import{M as b}from"./MainPanel-DtJPisVD.js";import{_}from"./MyDrawer-DcvhKoQD.js";import{g as z,p as x,_ as S}from"./index-bLfysVRn.js";const I=a=>x("",a),C={class:"pb-15"},j={class:"table-wrapper"},D={key:0,class:"pagination-wrapper"},O=i({name:"ExamplePage"}),U=S(Object.assign(O,{setup(i){const x=[{title:"ID",key:"ID",dataIndex:"ID"},{title:"数据1",key:"data1",dataIndex:"data1"},{title:"数据2",key:"data2",dataIndex:"data2"},{title:"操作",key:"op",dataIndex:"op"}];x.forEach((a=>a.align="center"));const S=a([]),O=a({total:0,page:1,pageSize:10}),U=a=>{O.value={...O.value,page:a},M()},F=(a,e)=>{O.value={...O.value,page:1,pageSize:e},M()},q=a(!1),M=async()=>{q.value=!0;const{page:a,pageSize:e}=O.value,t={page:a,pageSize:e},l=await(a=>z("",a))(t).catch((a=>{q.value=!1})),o=null==l?void 0:l.data;if(o){const{list:a,...e}=o,{page:t,pageSize:l,total:s}=e;S.value=a,O.value={...O.value,page:t,pageSize:l,total:s}}q.value=!1};M();const P=e({data1:"",data2:""}),A=e({title:t((()=>A[A.method])),method:"",id:"",add:"新增",edit:"修改"}),E=a(),N=a(!1),$=a(!1),B=(a,e)=>{(a=>{if(!a)return;const e=a=>Object.prototype.toString.call(a).slice(8,-1);for(const t in a){const l=a[t];Array.isArray(l)?a[t]=[]:"Object"===e(l)?a[t]={}:"Boolean"===e(l)?a[t]=!1:"Number"===e(l)?a[t]=0:a[t]=""}})(P),A.method=a,N.value=!0,h((()=>{var t;null==(t=E.value)||t.resetFields(),"edit"===a&&(((a={},e={})=>{for(const t in a)a[t]=e[t]})(P,e),A.id=e.id)}))},J=a(!1),R=a({}),G=async()=>{if(await E.value.validateFields()){$.value=!0;try{"add"===A.method?await(async()=>{const a=await I(P);(null==a?void 0:a.data)&&k.success("新增数据成功")})():"edit"===A.method&&await(async()=>{const a=await I(A.id);(null==a?void 0:a.data)&&k.success("修改数据成功")})(),$.value=!1,N.value=!1}catch(a){$.value=!1}}};return(a,e)=>(l(),o(b,{loading:q.value},{default:s((()=>[d("div",C,[n(r(c),{type:"primary",onClick:e[0]||(e[0]=a=>B("add"))},{default:s((()=>[u(" 添加数据 ")])),_:1})]),d("div",j,[n(r(m),{columns:x,"data-source":S.value,"row-key":a=>a.id,pagination:!1,bordered:!0,scroll:{x:!0},"row-class-name":"text-center"},{bodyCell:s((({column:a,record:e})=>["op"===a.dataIndex?(l(),p(v,{key:0},[n(r(c),{type:"link",onClick:()=>{return a=e,J.value=!0,void(R.value=a);var a}},{default:s((()=>[u("查看详情")])),_:2},1032,["onClick"]),n(r(c),{type:"link",onClick:()=>B("edit",e)},{default:s((()=>[u("编辑")])),_:2},1032,["onClick"])],64)):g("",!0)])),_:1},8,["data-source","row-key"]),O.value.total?(l(),p("div",D,[n(r(f),{current:O.value.page,"onUpdate:current":e[1]||(e[1]=a=>O.value.page=a),"page-size":O.value.pageSize,"onUpdate:pageSize":e[2]||(e[2]=a=>O.value.pageSize=a),total:O.value.total,"show-size-changer":"","show-total":a=>`总共 ${a} 条数据`,onChange:U,onShowSizeChange:F},null,8,["current","page-size","total","show-total"])])):g("",!0)]),n(_,{visible:N.value,"onUpdate:visible":e[5]||(e[5]=a=>N.value=a),"get-container":a.$el,width:"500px",title:A.title,onOnConfirm:G},{default:s((()=>[n(r(y),{model:P,ref_key:"exampleFormRef",ref:E,"label-col":{span:4},"wrapper-col":{span:12},autocomplete:"off"},{default:s((()=>[n(r(y).Item,{label:"数据1",name:"data1",rules:[{required:!0,message:"请输入数据1"}]},{default:s((()=>[n(r(w),{placeholder:"请输入数据1",value:P.data1,"onUpdate:value":e[3]||(e[3]=a=>P.data1=a)},null,8,["value"])])),_:1}),n(r(y).Item,{label:"数据2",name:"data2",rules:[{required:!0,message:"请输入数据2"}]},{default:s((()=>[n(r(w),{placeholder:"请输入数据2",value:P.data2,"onUpdate:value":e[4]||(e[4]=a=>P.data2=a)},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","get-container","title"])])),_:1},8,["loading"]))}}),[["__scopeId","data-v-f2388228"]]);export{U as default};
